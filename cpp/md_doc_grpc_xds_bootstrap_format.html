<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GRPC C++: xDS Bootstrap File Format in gRPC</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GRPC C++
   &#160;<span id="projectnumber">1.73.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">xDS Bootstrap File Format in gRPC </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This document specifies the xDS bootstrap file format supported by gRPC.</p>
<h1><a class="anchor" id="autotoc_md93"></a>
Background</h1>
<p>gRPC expects the xDS bootstrap configuration to be specified as a JSON string. The xDS bootstrap file location may be specified using the environment variable <code>GRPC_XDS_BOOTSTRAP</code>. Alternatively, the bootstrap file contents may be specified using the environment variable <code>GRPC_XDS_BOOTSTRAP_CONFIG</code>. If both are specified, the former takes precedence.</p>
<p>The xDS client inside of gRPC parses the bootstrap configuration specified by one of the above means when it is created to configure itself.</p>
<p>The following sections describe the bootstrap file format, including links to gRFCs where support for appropriate fields was added.</p>
<h1><a class="anchor" id="autotoc_md94"></a>
File Format</h1>
<div class="fragment"><div class="line">{</div>
<div class="line">  // The xDS server to talk to.  The value is an ordered array of server</div>
<div class="line">  // configurations, to support failing over to a secondary xDS server if the</div>
<div class="line">  // primary is down.</div>
<div class="line">  //</div>
<div class="line">  // Prior to gRFC A71, all but the first entry was ignored.</div>
<div class="line">  &quot;xds_servers&quot;: [</div>
<div class="line">    {</div>
<div class="line"> </div>
<div class="line">      // A target URI string suitable for creating a gRPC channel.</div>
<div class="line">      &quot;server_uri&quot;: &lt;string containing the target URI of xds server&gt;,</div>
<div class="line"> </div>
<div class="line">      // List of channel creds; client will stop at the first type it</div>
<div class="line">      // supports.  This field is required and must contain at least one</div>
<div class="line">      // channel creds type that the client supports.</div>
<div class="line">      //</div>
<div class="line">      // See section titled &quot;Supported Channel Credentials&quot;.</div>
<div class="line">      &quot;channel_creds&quot;: [</div>
<div class="line">        {</div>
<div class="line">          &quot;type&quot;: &lt;string containing channel cred type&gt;,</div>
<div class="line"> </div>
<div class="line">          // The &quot;config&quot; field is optional; it may be missing if the</div>
<div class="line">          // credential type does not require config parameters.</div>
<div class="line">          &quot;config&quot;: &lt;JSON object containing config for the type&gt;</div>
<div class="line">        }</div>
<div class="line">      ],</div>
<div class="line"> </div>
<div class="line">      // A list of features supported by the server.  New values will</div>
<div class="line">      // be added over time.  For forward compatibility reasons, the</div>
<div class="line">      // client will ignore any entry in the list that it does not</div>
<div class="line">      // understand, regardless of type.</div>
<div class="line">      // </div>
<div class="line">      // See section titled &quot;Supported Server Features&quot;.</div>
<div class="line">      &quot;server_features&quot;: [ ... ]</div>
<div class="line">    }</div>
<div class="line">  ],</div>
<div class="line"> </div>
<div class="line">  // Identifies a specific gRPC instance.</div>
<div class="line">  &quot;node&quot;: {</div>
<div class="line"> </div>
<div class="line">    // Opaque identifier for the gRPC instance.</div>
<div class="line">    &quot;id&quot;: &lt;string&gt;,</div>
<div class="line"> </div>
<div class="line">    // Identifier for the local service cluster where the gRPC instance is</div>
<div class="line">    // running.</div>
<div class="line">    &quot;cluster&quot;: &lt;string&gt;,</div>
<div class="line"> </div>
<div class="line">    // Specifies where the gRPC instance is running.</div>
<div class="line">    &quot;locality&quot;: {</div>
<div class="line">      &quot;region&quot;: &lt;string&gt;,</div>
<div class="line">      &quot;zone&quot;: &lt;string&gt;,</div>
<div class="line">      &quot;sub_zone&quot;: &lt;string&gt;,</div>
<div class="line">    },</div>
<div class="line"> </div>
<div class="line">    // Opaque metadata extending the node identifier.</div>
<div class="line">    &quot;metadata&quot;: &lt;JSON Object&gt;,</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  // Map of supported certificate providers, keyed by the provider instance</div>
<div class="line">  // name.</div>
<div class="line">  // See section titled &quot;Supported certificate providers&quot;.</div>
<div class="line">  &quot;certificate_providers&quot;: {</div>
<div class="line"> </div>
<div class="line">    // Certificate provider instance name, specified by the</div>
<div class="line">    // control plane, to fetch certificates from.</div>
<div class="line">    &quot;&lt;instance_name&gt;&quot;: {</div>
<div class="line"> </div>
<div class="line">      // Name of the plugin implementation.</div>
<div class="line">      &quot;plugin_name&quot;: &lt;string containing plugin type&gt;,</div>
<div class="line"> </div>
<div class="line">      // A JSON object containing the configuration for the plugin, whose schema</div>
<div class="line">      // is defined by the plugin.  The &quot;config&quot; field is optional; it may be</div>
<div class="line">      // missing if the credential type does not require config parameters.</div>
<div class="line">      &quot;config&quot;: &lt;JSON object containing config for the type&gt;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  // A template for the name of the Listener resource to subscribe to for a gRPC</div>
<div class="line">  // server. If the token `%s` is present in the string, all instances of the</div>
<div class="line">  // token will be replaced with the server&#39;s listening &quot;IP:port&quot; (e.g.,</div>
<div class="line">  // &quot;0.0.0.0:8080&quot;, &quot;[::]:8080&quot;).</div>
<div class="line">  &quot;server_listener_resource_name_template&quot;: &quot;example/resource/%s&quot;,</div>
<div class="line"> </div>
<div class="line">  // A template for the name of the Listener resource to subscribe to for a gRPC</div>
<div class="line">  // client channel.  Used only when the channel is created with an &quot;xds:&quot; URI</div>
<div class="line">  // with no authority.</div>
<div class="line">  //</div>
<div class="line">  // If starts with &quot;xdstp:&quot;, will be interpreted as a new-style name, in which</div>
<div class="line">  // case the authority of the URI will be used to select the relevant</div>
<div class="line">  // configuration in the &quot;authorities&quot; map.</div>
<div class="line">  //</div>
<div class="line">  // The token &quot;%s&quot;, if present in this string, will be replaced with the</div>
<div class="line">  // service authority (i.e., the path part of the target URI used to create the</div>
<div class="line">  // gRPC channel).  If the template starts with &quot;xdstp:&quot;, the replaced string</div>
<div class="line">  // will be percent-encoded.  In that case, the replacement string must include</div>
<div class="line">  // only characters allowed in a URI path as per RFC-3986 section 3.3 (which</div>
<div class="line">  // includes &#39;/&#39;), and all other characters must be percent-encoded.</div>
<div class="line">  //</div>
<div class="line">  // Defaults to &quot;%s&quot;.</div>
<div class="line">  &quot;client_default_listener_resource_name_template&quot;: &lt;string&gt;,</div>
<div class="line"> </div>
<div class="line">  // A map of authority name to corresponding configuration.</div>
<div class="line">  //</div>
<div class="line">  // This is used in the following cases:</div>
<div class="line">  // - A gRPC client channel is created using an &quot;xds:&quot; URI that includes</div>
<div class="line">  //   an authority.</div>
<div class="line">  // - A gRPC client channel is created using an &quot;xds:&quot; URI with no</div>
<div class="line">  //   authority, but the &quot;client_default_listener_resource_name_template&quot;</div>
<div class="line">  //   field turns it into an &quot;xdstp:&quot; URI.</div>
<div class="line">  // - A gRPC server is created and the</div>
<div class="line">  //   &quot;server_listener_resource_name_template&quot; field is an &quot;xdstp:&quot; URI.</div>
<div class="line">  //</div>
<div class="line">  // In any of those cases, it is an error if the specified authority is</div>
<div class="line">  // not present in this map.</div>
<div class="line">  &quot;authorities&quot;: {</div>
<div class="line">    // Entries are keyed by authority name.</div>
<div class="line">    // Note: If a new-style resource name has no authority, we will use</div>
<div class="line">    // the empty string here as the key.</div>
<div class="line">    &quot;&lt;authority_name&gt;&quot;: {</div>
<div class="line"> </div>
<div class="line">      // A template for the name of the Listener resource to subscribe</div>
<div class="line">      // to for a gRPC client channel.  Used only when the channel is</div>
<div class="line">      // created using an &quot;xds:&quot; URI with this authority name.</div>
<div class="line">      //</div>
<div class="line">      // The token &quot;%s&quot;, if present in this string, will be replaced</div>
<div class="line">      // with percent-encoded service authority (i.e., the path part of the</div>
<div class="line">      // target URI used to create the gRPC channel).  The replacement string</div>
<div class="line">      // must include only characters allowed in a URI path as per RFC-3986</div>
<div class="line">      // section 3.3 (which includes &#39;/&#39;), and all other characters must be</div>
<div class="line">      // percent-encoded.</div>
<div class="line">      //</div>
<div class="line">      // Must start with &quot;xdstp://&lt;authority_name&gt;/&quot;.  If it does not,</div>
<div class="line">      // that is considered a bootstrap file parsing error.</div>
<div class="line">      //</div>
<div class="line">      // If not present in the bootstrap file, defaults to</div>
<div class="line">      // &quot;xdstp://&lt;authority_name&gt;/envoy.config.listener.v3.Listener/%s&quot;.</div>
<div class="line">      &quot;client_listener_resource_name_template&quot;: &lt;string&gt;,</div>
<div class="line"> </div>
<div class="line">      // Ordered list of xDS servers to contact for this authority.</div>
<div class="line">      // Format is exactly the same as the top level &quot;xds_servers&quot; field.</div>
<div class="line">      //</div>
<div class="line">      // If the same server is listed in multiple authorities, the</div>
<div class="line">      // entries will be de-duped (i.e., resources for both authorities</div>
<div class="line">      // will be fetched on the same ADS stream).</div>
<div class="line">      //</div>
<div class="line">      // If not specified, the top-level server list is used.</div>
<div class="line">      &quot;xds_servers&quot;: [ ... ]</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md95"></a>
Supported Channel Credentials</h2>
<p>gRPC supports the following channel credentials as part of the <code>channel_creds</code> field of <code>xds_servers</code>.</p>
<h3><a class="anchor" id="autotoc_md96"></a>
Insecure credentials</h3>
<ul>
<li><b>Type Name</b>: <code>insecure</code></li>
<li><b>Config</b>: Accepts no configuration</li>
</ul>
<h3><a class="anchor" id="autotoc_md97"></a>
Google Default credentials</h3>
<ul>
<li><b>Type Name</b>: <code>google_default</code></li>
<li><b>Config</b>: Accepts no configuration</li>
</ul>
<h3><a class="anchor" id="autotoc_md98"></a>
mTLS credentials</h3>
<ul>
<li><b>Type Name</b>: <code>tls</code></li>
<li><b>Config</b>: As described in [gRFC A65](a65): <div class="fragment"><div class="line">{</div>
<div class="line">  // Path to CA certificate file.</div>
<div class="line">  // If unset, system-wide root certs are used.</div>
<div class="line">  &quot;ca_certificate_file&quot;: &lt;string&gt;,</div>
<div class="line"> </div>
<div class="line">  // Paths to identity certificate file and private key file.</div>
<div class="line">  // If either of these fields are set, both must be set.</div>
<div class="line">  // If set, mTLS will be used; if unset, normal TLS will be used.</div>
<div class="line">  &quot;certificate_file&quot;: &lt;string&gt;,</div>
<div class="line">  &quot;private_key_file&quot;: &lt;string&gt;,</div>
<div class="line"> </div>
<div class="line">  // How often to re-read the certificate files.</div>
<div class="line">  // Value is the JSON format described for a google.protobuf.Duration</div>
<div class="line">  // message in https://protobuf.dev/programming-guides/proto3/#json.</div>
<div class="line">  // If unset, defaults to &quot;600s&quot;.</div>
<div class="line">  &quot;refresh_interval&quot;: &lt;string&gt;</div>
<div class="line">}</div>
</div><!-- fragment --></li>
</ul>
<h2><a class="anchor" id="autotoc_md99"></a>
Supported Certificate Provider Instances</h2>
<p>gRPC supports the following Certificate Provider instances as part of the <code>certificate_providers</code> field:</p>
<h3><a class="anchor" id="autotoc_md100"></a>
PEM file watcher</h3>
<ul>
<li><b>Plugin Name</b>: <code>file_watcher</code></li>
<li><b>Config</b>: As described in [gRFC A29](a29): <div class="fragment"><div class="line">{</div>
<div class="line">    &quot;certificate_file&quot;: &quot;&lt;path to the certificate file in PEM format&gt;&quot;,</div>
<div class="line">    &quot;private_key_file&quot;: &quot;&lt;path to private key file in PEM format&gt;&quot;,</div>
<div class="line">    &quot;ca_certificate_file&quot;: &quot;&lt;path to CA certificate file in PEM format&gt;&quot;,</div>
<div class="line">    &quot;refresh_interval&quot;: &quot;&lt;JSON form of google.protobuf.Duration&gt;&quot;</div>
<div class="line">}</div>
</div><!-- fragment --></li>
</ul>
<h2><a class="anchor" id="autotoc_md101"></a>
Supported Server Features</h2>
<p>gRPC supports the following server features in the <code>server_features</code> field inside <code>xds_servers</code>:</p><ul>
<li><code>xds_v3</code>: Added in gRFC A30. Supported in older versions of gRPC. See <a class="el" href="grpc__xds__features_8md.html">here</a> for when gRPC added support for xDS transport protocol v3, and when support for xDS transport protocol v2 was dropped.</li>
<li><code>ignore_resource_deletion</code>: Added in [gRFC A53](a53)</li>
</ul>
<h2><a class="anchor" id="autotoc_md102"></a>
When were fields added?</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Bootstrap Field </th><th class="markdownTableHeadNone">Relevant gRFCs  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>xds_servers</code> </td><td class="markdownTableBodyNone">[A27](a27), [A71](a71)  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>google_default</code> channel credentials </td><td class="markdownTableBodyNone">[A27](a27)  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>insecure</code> channel credentials </td><td class="markdownTableBodyNone">[A27](a27)  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>node</code> </td><td class="markdownTableBodyNone">[A27](a27)  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>certificate_providers</code> </td><td class="markdownTableBodyNone">[A29](a29)  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>file_watcher</code>certificate provider </td><td class="markdownTableBodyNone">[A29](a29)  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>xds_servers.server_features</code> </td><td class="markdownTableBodyNone">[A30](a30)  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>server_listener_resource_name_template</code> </td><td class="markdownTableBodyNone">[A36](a36), [A47](a47)  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>client_default_listener_resource_name_template</code> </td><td class="markdownTableBodyNone">[A47](a47)  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>authorities</code> </td><td class="markdownTableBodyNone">[A47](a47)  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>tls</code> channel credentials </td><td class="markdownTableBodyNone">[A65](a65)  </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Jun 7 2025 19:35:56 for GRPC C++ by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
